# Internationalization (i18n) Guide

Guide pour l'internationalisation de La Fine Parfumerie avec next-intl.

## Status

⚠️ **En préparation** - Structure créée, implémentation complète post-launch.

## Structure des Fichiers

```
i18n/
├── config.ts          # Configuration et utilitaires
└── locales/
    ├── fr.json        # Traductions françaises (défaut)
    └── en.json        # Traductions anglaises
```

## Locales Supportées

| Code | Langue | Status |
|------|--------|--------|
| `fr` | Français | ✅ Défaut |
| `en` | English | ✅ Préparé |

## Configuration

### i18n/config.ts

```typescript
import { locales, defaultLocale, Locale } from '@/i18n/config';

// Locales disponibles
console.log(locales); // ['fr', 'en']

// Locale par défaut
console.log(defaultLocale); // 'fr'

// Type Locale
type MyLocale = Locale; // 'fr' | 'en'
```

## Utilisation (Future)

### 1. Provider Setup

```tsx
// app/[locale]/layout.tsx
import { NextIntlClientProvider } from 'next-intl';
import { getMessages } from '@/i18n/config';

export default async function LocaleLayout({
  children,
  params: { locale }
}) {
  const messages = await getMessages(locale);

  return (
    <NextIntlClientProvider locale={locale} messages={messages}>
      {children}
    </NextIntlClientProvider>
  );
}
```

### 2. Utilisation dans les Composants

```tsx
import { useTranslations } from 'next-intl';

function ProductCard() {
  const t = useTranslations('product');

  return (
    <button>{t('addToCart')}</button>
    // FR: "Ajouter au panier"
    // EN: "Add to cart"
  );
}
```

### 3. Avec Paramètres

```tsx
const t = useTranslations('cart');

// Pluralisation
t('items', { count: 3 }); // "3 articles"

// Interpolation
t('footer.copyright', { year: 2024 }); // "© 2024 La Fine..."
```

### 4. Formatage

```tsx
import { useFormatter } from 'next-intl';

function Price({ amount }) {
  const format = useFormatter();

  return (
    <span>{format.number(amount, { style: 'currency', currency: 'EUR' })}</span>
    // FR: "99,00 €"
    // EN: "€99.00"
  );
}
```

## Ajouter une Nouvelle Locale

### 1. Créer le fichier de traduction

```bash
# Copier le fichier français comme base
cp i18n/locales/fr.json i18n/locales/de.json
```

### 2. Traduire le contenu

```json
// i18n/locales/de.json
{
  "common": {
    "loading": "Laden...",
    ...
  }
}
```

### 3. Ajouter à la config

```typescript
// i18n/config.ts
export const locales = ['fr', 'en', 'de'] as const;

export const localeNames: Record<Locale, string> = {
  fr: 'Français',
  en: 'English',
  de: 'Deutsch',
};
```

### 4. Créer le routing

```typescript
// middleware.ts
import createMiddleware from 'next-intl/middleware';

export default createMiddleware({
  locales: ['fr', 'en', 'de'],
  defaultLocale: 'fr'
});
```

## Structure des Clés

Organisation recommandée des clés de traduction :

```
common.*        # Éléments globaux (loading, error, etc.)
nav.*           # Navigation
product.*       # Page produit
cart.*          # Panier
checkout.*      # Paiement
auth.*          # Authentification
account.*       # Compte utilisateur
orders.*        # Commandes
footer.*        # Pied de page
errors.*        # Messages d'erreur
```

## RTL Support (Right-to-Left)

Pour les langues RTL (arabe, hébreu, etc.) :

### 1. Détecter RTL

```typescript
import { isRTL } from '@/i18n/config';

function App({ locale }) {
  return (
    <html dir={isRTL(locale) ? 'rtl' : 'ltr'}>
      ...
    </html>
  );
}
```

### 2. CSS RTL

```css
/* Styles adaptés RTL */
[dir="rtl"] .sidebar {
  left: auto;
  right: 0;
}

/* Ou avec Tailwind */
<div className="mr-4 rtl:mr-0 rtl:ml-4">
```

## SEO Multi-langue

### 1. Alternate Links

```tsx
// Dans le head de chaque page
<link rel="alternate" hrefLang="fr" href="https://lafineparfumerie.fr/fr/..." />
<link rel="alternate" hrefLang="en" href="https://lafineparfumerie.fr/en/..." />
<link rel="alternate" hrefLang="x-default" href="https://lafineparfumerie.fr/..." />
```

### 2. Meta Tags

```tsx
export const metadata = {
  alternates: {
    canonical: '/products',
    languages: {
      'fr-FR': '/fr/produits',
      'en-US': '/en/products',
    },
  },
};
```

## Testing

### Vérifier les traductions manquantes

```bash
# Script pour trouver les clés manquantes
node scripts/check-translations.js
```

```javascript
// scripts/check-translations.js
const fr = require('../i18n/locales/fr.json');
const en = require('../i18n/locales/en.json');

function findMissingKeys(obj1, obj2, path = '') {
  const missing = [];
  for (const key in obj1) {
    const newPath = path ? `${path}.${key}` : key;
    if (!(key in obj2)) {
      missing.push(newPath);
    } else if (typeof obj1[key] === 'object') {
      missing.push(...findMissingKeys(obj1[key], obj2[key], newPath));
    }
  }
  return missing;
}

console.log('Missing in EN:', findMissingKeys(fr, en));
console.log('Missing in FR:', findMissingKeys(en, fr));
```

## Ressources

- [next-intl Documentation](https://next-intl-docs.vercel.app/)
- [ICU Message Format](https://unicode-org.github.io/icu/userguide/format_parse/messages/)
- [Intl API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)
